# 中文名字生成器脚本说明

本脚本用于生成高质量的中文名字库，解决原名字库的两个主要问题：
1. 两字名（姓+单字）比例太低
2. 大姓（王、李、张、刘、陈等）比例不符合实际人口分布

---

## 📊 生成的名字库特点

### 名字结构
- **两字名（50%）**：约 5000 个，如"王伟"、"李娜"
- **三字名（50%）**：约 5000 个，如"张志强"、"刘思琪"
- **总计**：约 10000 个不重复名字

### 姓氏分布（符合中国人口比例）
- **前5大姓**（王、李、张、刘、陈）：各占 4-8%
- **前10大姓**：共占约 45%
- **前20大姓**：共占约 55%
- 其他姓氏：共占约 45%

### 名字时代特征
- **70-80年代**：建国、建军、桂英、秀兰等（经典风格）
- **90-00年代**：浩然、雨萱、思远、紫涵等（现代风格）
- **10-20年代**：子轩、梓涵、雨桐、思睿等（当代风格）
- **文艺风格**：清扬、婉约、静姝、雅韵等（诗意风格）

### 字符库规模
- **单字名字符**：300+ 个常用字（按性别、年代分类）
- **双字名组合**：200+ 个常用组合（4种风格）
- **姓氏库**：100 个姓氏（按人口比例加权）

---

## 🚀 使用方法

### 生成新的名字库

```bash
# Windows (PowerShell)
$env:PYTHONIOENCODING="utf-8"; python generate_names.py

# Linux/Mac
PYTHONIOENCODING=utf-8 python generate_names.py
```

### 输出文件
- 生成的文件：`names/chinese_names_new.txt`
- 会自动合并现有名字库
- 检查无误后可替换原文件

### 替换原文件

```bash
# Windows
Move-Item -Path "names\chinese_names_new.txt" -Destination "names\chinese_names.txt" -Force

# Linux/Mac
mv names/chinese_names_new.txt names/chinese_names.txt
```

---

## ⚙️ 自定义配置

### 调整生成数量

修改 `main()` 函数中的参数：

```python
# 生成更多两字名
two_char_names = generate_two_char_names(8000)  # 默认 5000

# 生成更多三字名
three_char_names = generate_three_char_names(8000)  # 默认 5000
```

**注意**：数量太大可能导致去重后实际数量减少，建议单类不超过 10000。

### 调整姓氏权重

修改 `generate_two_char_names()` 和 `generate_three_char_names()` 函数中的权重：

```python
weighted_surnames = (
    SURNAMES['super'] * 20 +  # 超大姓权重（王李张刘陈）
    SURNAMES['major'] * 8 +   # 大姓权重
    SURNAMES['common'] * 3 +  # 常见姓权重
    SURNAMES['normal'] * 1    # 一般姓权重
)
```

**权重说明：**
- 数字越大，该类姓氏出现频率越高
- `super * 20` 表示超大姓出现概率是一般姓的 20 倍
- 可根据需要调整比例

### 添加更多名字

**添加姓氏：**

在 `SURNAMES` 字典中添加：

```python
SURNAMES = {
    'super': ['王', '李', '张', '刘', '陈', '杨'],  # 添加'杨'
    # ...
}
```

**添加单字名：**

在 `GIVEN_NAMES_SINGLE` 字典中添加：

```python
'male_10s': [
    '睿', '泽', '宇', '新字',  # 添加新字
    # ...
]
```

**添加双字名：**

在 `GIVEN_NAMES_DOUBLE` 字典中添加：

```python
'contemporary': [
    '子轩', '梓轩', '新名字',  # 添加新组合
    # ...
]
```

---

## 📈 统计信息示例

```
📊 名字库统计信息
==================================================
总名字数：10000
  - 两字名（姓+单字）：5000 个 (50.0%)
  - 三字名（姓+双字）：5000 个 (50.0%)

📈 前20大姓分布：
  张:  500 ( 5.00%) █████
  陈:  484 ( 4.84%) ████
  李:  473 ( 4.73%) ████
  王:  469 ( 4.69%) ████
  刘:  466 ( 4.66%) ████
  杨:  267 ( 2.67%) ██
  黄:  265 ( 2.65%) ██
  周:  263 ( 2.63%) ██
  ...
```

---

## 🎯 实际应用效果

### 原名字库问题
- ❌ 几乎全是三字名
- ❌ 大姓比例偏低
- ❌ 名字重复率高

### 新名字库优势
- ✅ 两字名占 24%，更真实
- ✅ 大姓比例符合人口分布
- ✅ 12000+ 名字，重复率极低
- ✅ 覆盖不同年代特征
- ✅ 自动去重

---

## 🔄 定期更新建议

建议每隔一段时间重新运行脚本，原因：
1. 添加了新的名字模板
2. 调整了姓氏权重
3. 需要更多名字

重新运行会自动合并旧名字，不会丢失数据。

---

## 💡 技术说明

### 权重算法
使用列表复制实现权重：
```python
['王', '李'] * 20 + ['赵', '钱'] * 5
# 结果：王和李出现概率是赵钱的4倍
```

### 去重机制
- 使用 Python 的 `set` 数据结构自动去重
- 与现有名字库合并时也会自动去重
- 保证名字库中没有重复

### 编码处理
- 所有文件使用 UTF-8 编码
- Windows 需要设置 `PYTHONIOENCODING=utf-8`
- 确保中文字符正确显示

---

## 🛠️ 故障排查

### 问题：乱码

**解决方案：**
```bash
# Windows
$env:PYTHONIOENCODING="utf-8"
chcp 65001

# Linux/Mac
export PYTHONIOENCODING=utf-8
export LANG=zh_CN.UTF-8
```

### 问题：名字重复太多

**解决方案：**
增加生成数量或添加更多名字模板

### 问题：姓氏分布不理想

**解决方案：**
调整权重参数，增大/减小对应类别的权重

---

## 📝 许可

本脚本随项目开源，可自由修改使用。

---

**生成高质量的中文名字库！** ✨

